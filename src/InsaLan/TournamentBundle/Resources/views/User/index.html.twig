{% extends 'InsaLanTournamentBundle:User:layout.html.twig' %}

{% block body %}
{{ parent() }}

<article>
  <header>
    <h2>Bienvenue {{ app.user.username }}</h2>
  </header>

  {% for participant in participants %}

  <div class="frame {% if participant.validated == 2 %} frame-success {% endif %}">
    <header class="full">
      <div class="step pull-left">
        {% if participant.validated == 2 %} &#10003; {% else %} ! {% endif %}
      </div>
      <div class="title pull-left">
        {% if participant.participantType == 'team' %} Equipe {% endif %}
        {{ participant.name }}
      </div>
      <div class="title pull-right">
        <img style="margin-right:0px;max-height:60px;display:block;" src="{{ asset(participant.tournament.getUploadDir() ~ participant.tournament.logoPath) }}" alt=""/>
      </div>
      <br class="clear">
    </header>
    <div class="text">
      {% if participant.participantType == 'team' %}
        <ul class="shift" style="list-style-type:none">
        {% for p in participant.players %}
        <li>
          <div style="margin: 8px 0px 0px 10px; font-size:20px" class="pull-left">
            <span>{{ p.gameName }}</span>
          </div>
          <br class="clear">
        </li>
        {% endfor %}
        </ul>
      {% endif %}

      <br class="clear">

      {% if participant.validated == 1 %}
        Le tournoi {{ participant.tournament.name }} est complet ! En cas de désistement, vous serez automatiquement validé.
      {% endif %}
      {% if participant.validated == 0 and participant.participantType == 'team' %}
        L'équipe sera validée quand {{ participant.tournament.teamMinPlayer }} joueurs seront inscrits.
      {% endif %}
    </div>

    {% if participant.participantType == 'team' %}

      <a class="btn btn-danger ctrl grid-2 pull-left" href="{{ path('insalan_tournament_user_leaveteam', {teamId: participant.id}) }}">Quitter</a>

    {% else %}

      <a class="btn btn-danger ctrl grid-2 pull-left" href="{{ path('insalan_tournament_user_leave', {id: participant.tournament.id}) }}">Abandonner</a>

    {% endif %}

    {% if participant.validated == 2 %}
      <a class="btn btn-primary ctrl grid-8 pull-left" href="{{ path('insalan_tournament_user_teamdetails', {id: participant.id }) }}">Jouer mes matchs</a>
    {% endif %}

    <br class="clear">
  </div>

  {% endfor %}

  <div class="frame frame-active">
    <header class="full">
      <div class="step pull-left">
        &#x271a;
      </div>
      <div class="title pull-left">Inscription à un tournoi</div>
      <br class="clear">
    </header>
      <section class="tournaments">
        <ul>
          {% for t in tournaments %}
            {% spaceless %}
              <li>
                {% if t.participantType == 'team' %}
                <a href="{{ path('insalan_tournament_user_jointeam', {id: t.id}) }}">
                {% else %}
                <a href="{{ path('insalan_tournament_user_setplayer', {tournament: t.id}) }}">
                {% endif %}
                  <img src="{{ asset(t.getUploadDir() ~ t.logoPath) }} " alt="{{ t.name }}"/>
                </a>
              </li>
            {% endspaceless %}
          {% endfor %}
        </ul>
      <div class="clear"></div>
    </section>
  </div>

</article>

{% endblock %}
