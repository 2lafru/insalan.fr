{% extends 'InsaLanNewsBundle::layout.html.twig' %}

{% block title %}
  {{ parent() }}
{% endblock %}

{% block body %}
  {{ parent() }}

  {#<img src="{{ asset('bundles/insalan/img/banner.png') }}"> #}
  <div class="grid-7 pull-left">
      <iframe width="700" height="394" src="//www.youtube.com/embed/WdpiNhS1TtA?rel=0&amp;showinfo=0" frameborder="0" allowfullscreen></iframe>
  </div>
  <div class="grid-3 pull-left">
      <div class="frame frame-active">
          <header class="full">
              <div class="title pull-left">League of Legends</div>
              <small class="pull-right">slots: 32<br>prix: ??? €</small>
            <br class="clear">
          </header>
          <header class="full">
              <div class="title pull-left">CS:GO</div>

              <small class="pull-right">slots: 32<br>prix: ??? €</small>
              <br class="clear">
          </header>
          <header class="full">
              <div class="title pull-left">StarCraft II</div>
              <small class="pull-right">slots: 32<br>prix: ??? €</small>
              <br class="clear">
          </header>
          <header class="full">
              <div class="title pull-left">Dota 2</div>
              <small class="pull-right">slots: 32<br>prix: ??? €</small>
              <br class="clear">
          </header>
          <header class="full">
              <div class="title pull-left">Hearthstone</div>
              <small class="pull-right">slots: 32<br>prix: ??? €</small>
              <br class="clear">
          </header>
          <header class="huge-button">
              <div class="title pull-left">
                  {% if app.user %}
                  <a href="{{ path('insalan_tournament_user_index') }}" style="display:block">MON COMPTE</a>
                  {% else %}
                  <a href="{{path('fos_user_registration_register') }}" style="display:block">INSCRIPTION</a>
                  {% endif %}
              </div>
              <br class="clear">
          </header>
          <section class="tournaments">
          </section>
      </div>
  </div>
  <br class="clear">
  <section class="news">
    <h2>Actualités</h2>

    {% for n in news %}
      <article class="subsection">
        <aside>
          <div class="square">
            <a href="#body"><span></span></a>
          </div>
        </aside>

        <header>
          <h2>{{ n.title }}</h2>
          <span class="date">{{ n.createdAt | date('d/m/Y H:i') }}</span> -
          <span class="category">{{ n.category }}</span>
        </header>

        <section>
          {{ n.text | markdown }}
        </section>
      </article>
    {% endfor %}
  </section>

{% endblock %}


{% block javascripts %}
  {{ parent() }}

  <script type="text/javascript">
    window.addEvent('domready', function() {
      var carousel = $$('aside.carousel');
      for (var i = 0; i < carousel.length; ++i) {
        var links = carousel[i].getElements('.items a');
        links.activeId = 0;
        links.pause = false;

        carousel[i].addEvent('mouseenter', function() { links.pause = true; });
        carousel[i].addEvent('mouseleave', function() { links.pause = false; });

        links.each(function(e, j) {
          e.addEvent('click', function(ev) {
            e.getParent('.items').getElements('a').removeClass('active');
            this.addClass('active');

            var picture = e.getParent('aside.carousel').getElements('.picture');
            picture.setStyle('display', 'none');
            picture[j].setStyle('display', '');

            var title = e.getParent('aside.carousel').getElements('.title > div');
            title.setStyle('display', 'none');
            title[j].setStyle('display', '');

            var open = e.getParent('aside.carousel').getElements('.open > a');
            open.setStyle('display', 'none');
            open[j].setStyle('display', '');

            ev.stop();
            links.activeId = j;
          });
        });

        links.slideShow = window.setInterval(function() {
          if (links.pause) return;
          links.activeId = (links.activeId + 1) % links.length;
          links[links.activeId].click();
        }, 5000);
      }
    });
  </script>
{% endblock %}
